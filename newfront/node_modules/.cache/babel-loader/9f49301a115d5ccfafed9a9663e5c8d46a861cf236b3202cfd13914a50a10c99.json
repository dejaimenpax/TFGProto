{"ast":null,"code":"import _slicedToArray from\"C:/Users/jaime/TFGProto/newfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Routes,Route,Link}from\"react-router-dom\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"./styles/App.css\";import AuthService from\"./services/auth.service\";import Login from\"./components/Login\";import Register from\"./components/Register\";import Home from\"./components/Home\";import Profile from\"./components/Profile/Profile\";import BoardUser from\"./components/UserBoards/User/BoardUser\";import BoardTeacher from\"./components/UserBoards/Teacher/BoardTeacher\";import BoardGestion from\"./components/UserBoards/Gestion/BoardGestion\";import Resolver from\"./components/Exercises/Resolver\";import EventBus from\"./common/EventBus\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showTeacherBoard=_useState2[0],setShowTeacherBoard=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showGestionBoard=_useState4[0],setShowGestionBoard=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),currentUser=_useState6[0],setCurrentUser=_useState6[1];useEffect(function(){AuthService.checkTokenExpiration();var user=AuthService.getCurrentUser();if(user){setCurrentUser(user);setShowTeacherBoard(user.roles.includes(\"ROLE_TEACHER\"));setShowGestionBoard(user.roles.includes(\"ROLE_ADMIN\")||user.roles.includes(\"ROLE_TEACHER\"));}EventBus.on(\"logout\",function(){logOut();});return function(){EventBus.remove(\"logout\");};},[]);var logOut=function logOut(){AuthService.logout();setShowTeacherBoard(false);setShowGestionBoard(false);setCurrentUser(undefined);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-expand-lg navbar-light bg-info\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-brand\",children:\"MatemAPI\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav mr-auto\",children:[showGestionBoard&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/gestion\",className:\"nav-link\",children:\"Gesti\\xF3n de usuarios\"})}),showTeacherBoard&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/teacher\",className:\"nav-link\",children:\"Estad\\xEDsticas de alumnos\"})}),!showTeacherBoard&&!showGestionBoard&&currentUser&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/resolver\",className:\"nav-link\",children:\"Resolver ejercicios\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/user\",className:\"nav-link\",children:\"Mis estad\\xEDsticas\"})})]})]}),currentUser?/*#__PURE__*/_jsx(\"div\",{className:\"navbar-nav ml-auto\",children:/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-info text-dark dropdown-toggle\",type:\"button\",id:\"dropdownMenuButton\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:[\"\\xC1rea de \",currentUser.username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"dropdown-item\",children:\"Mi perfil\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"dropdown-item\",onClick:logOut,children:\"Cerrar Sesi\\xF3n\"})]})]})})}):/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav ml-auto\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"nav-link\",children:\"Iniciar Sesi\\xF3n\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"nav-link\",children:\"Registrarse\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{logOut:logOut})}),showGestionBoard&&/*#__PURE__*/_jsx(Route,{path:\"/gestion\",element:/*#__PURE__*/_jsx(BoardGestion,{})}),showTeacherBoard&&/*#__PURE__*/_jsx(Route,{path:\"/teacher\",element:/*#__PURE__*/_jsx(BoardTeacher,{})}),!showTeacherBoard&&!showGestionBoard&&/*#__PURE__*/_jsx(Route,{path:\"/user\",element:/*#__PURE__*/_jsx(BoardUser,{})}),/*#__PURE__*/_jsx(Route,{path:\"/resolver\",element:/*#__PURE__*/_jsx(Resolver,{})})]})})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Link","AuthService","Login","Register","Home","Profile","BoardUser","BoardTeacher","BoardGestion","Resolver","EventBus","App","showTeacherBoard","setShowTeacherBoard","showGestionBoard","setShowGestionBoard","undefined","currentUser","setCurrentUser","checkTokenExpiration","user","getCurrentUser","roles","includes","on","logOut","remove","logout","username"],"sources":["C:/Users/jaime/TFGProto/newfront/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Routes, Route, Link } from \"react-router-dom\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./styles/App.css\";\r\n\r\nimport AuthService from \"./services/auth.service\";\r\nimport Login from \"./components/Login\";\r\nimport Register from \"./components/Register\";\r\nimport Home from \"./components/Home\";\r\nimport Profile from \"./components/Profile/Profile\";\r\nimport BoardUser from \"./components/UserBoards/User/BoardUser\";\r\nimport BoardTeacher from \"./components/UserBoards/Teacher/BoardTeacher\";\r\nimport BoardGestion from \"./components/UserBoards/Gestion/BoardGestion\";\r\nimport Resolver from \"./components/Exercises/Resolver\";\r\nimport EventBus from \"./common/EventBus\";\r\n\r\nconst App = () => {\r\n  const [showTeacherBoard, setShowTeacherBoard] = useState(false);\r\n  const [showGestionBoard, setShowGestionBoard] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState(undefined);\r\n\r\n  useEffect(() => {\r\n    AuthService.checkTokenExpiration();\r\n\r\n    const user = AuthService.getCurrentUser();\r\n\r\n    if (user) {\r\n      setCurrentUser(user);\r\n      setShowTeacherBoard(user.roles.includes(\"ROLE_TEACHER\"));\r\n      setShowGestionBoard(user.roles.includes(\"ROLE_ADMIN\") || user.roles.includes(\"ROLE_TEACHER\"));\r\n    }\r\n\r\n    EventBus.on(\"logout\", () => {\r\n      logOut();\r\n    });\r\n\r\n    return () => {\r\n      EventBus.remove(\"logout\");\r\n    };\r\n  }, []);\r\n\r\n  const logOut = () => {\r\n    AuthService.logout();\r\n    setShowTeacherBoard(false);\r\n    setShowGestionBoard(false);\r\n    setCurrentUser(undefined);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-info\">\r\n        <Link to={\"/\"} className=\"navbar-brand\">\r\n          MatemAPI\r\n        </Link>\r\n        <div className=\"navbar-nav mr-auto\">\r\n          {showGestionBoard && (\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/gestion\"} className=\"nav-link\">\r\n                Gestión de usuarios\r\n              </Link>\r\n            </li>\r\n          )}\r\n          {showTeacherBoard && (\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/teacher\"} className=\"nav-link\">\r\n                Estadísticas de alumnos\r\n              </Link>\r\n            </li>\r\n          )}\r\n          {!showTeacherBoard && !showGestionBoard && currentUser && (\r\n            <>\r\n              <li className=\"nav-item\">\r\n                <Link to={\"/resolver\"} className=\"nav-link\">\r\n                  Resolver ejercicios\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <Link to={\"/user\"} className=\"nav-link\">\r\n                  Mis estadísticas\r\n                </Link>\r\n              </li>\r\n            </>\r\n          )}\r\n        </div>\r\n        {currentUser ? (\r\n          <div className=\"navbar-nav ml-auto\">\r\n            <li className=\"nav-item\">\r\n              <div className=\"dropdown\">\r\n                <button\r\n                  className=\"btn btn-info text-dark dropdown-toggle\"\r\n                  type=\"button\"\r\n                  id=\"dropdownMenuButton\"\r\n                  data-toggle=\"dropdown\"\r\n                  aria-haspopup=\"true\"\r\n                  aria-expanded=\"false\"\r\n                >\r\n                  Área de {currentUser.username}\r\n                </button>\r\n                <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\r\n                  <Link to={\"/profile\"} className=\"dropdown-item\">\r\n                    Mi perfil\r\n                  </Link>\r\n                  <Link to={\"/login\"} className=\"dropdown-item\" onClick={logOut}>\r\n                    Cerrar Sesión\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          </div>\r\n        ) : (\r\n          <div className=\"navbar-nav ml-auto\">\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/login\"} className=\"nav-link\">\r\n                Iniciar Sesión\r\n              </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/register\"} className=\"nav-link\">\r\n                Registrarse\r\n              </Link>\r\n            </li>\r\n          </div>\r\n        )}\r\n      </nav>\r\n      <div className=\"container mt-3\">\r\n        <Routes>\r\n          <Route path=\"/\" element={<Home />} />\r\n          <Route path=\"/login\" element={<Login />} />\r\n          <Route path=\"/register\" element={<Register />} />\r\n          <Route path=\"/profile\" element={<Profile logOut={logOut} />} />\r\n          {showGestionBoard && <Route path=\"/gestion\" element={<BoardGestion />} />}\r\n          {showTeacherBoard && (\r\n            <Route path=\"/teacher\" element={<BoardTeacher />} />\r\n          )}\r\n          {!showTeacherBoard && !showGestionBoard && (\r\n            <Route path=\"/user\" element={<BoardUser />} />\r\n          )}\r\n          <Route path=\"/resolver\" element={<Resolver />} />\r\n        </Routes>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}