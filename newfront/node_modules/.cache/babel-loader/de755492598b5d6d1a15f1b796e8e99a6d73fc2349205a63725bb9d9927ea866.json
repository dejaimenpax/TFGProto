{"ast":null,"code":"import _slicedToArray from\"C:/Users/jaime/TFGProto/newfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import{useNavigate}from'react-router-dom';import Form from\"react-validation/build/form\";import Input from\"react-validation/build/input\";import CheckButton from\"react-validation/build/button\";import AuthService from\"../services/auth.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var required=function required(value){if(!value){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:\"Es necesario rellenar este campo.\"});}};var Login=function Login(){var navigate=useNavigate();var form=useRef();var checkBtn=useRef();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var onChangeEmail=function onChangeEmail(e){var email=e.target.value;setEmail(email);};var onChangePassword=function onChangePassword(e){var password=e.target.value;setPassword(password);};var handleLogin=function handleLogin(e){e.preventDefault();setMessage(\"\");setLoading(true);form.current.validateAll();if(checkBtn.current.context._errors.length===0){AuthService.login(email,password).then(function(){//navigate(\"/profile\") si directamente quieres ir al perfil\nnavigate(\"/resolver\");window.location.reload();},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setLoading(false);setMessage(resMessage);});}else{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",alt:\"profile-img\",className:\"profile-img-card\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleLogin,ref:form,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"email\",value:email,onChange:onChangeEmail,validations:[required]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",className:\"form-control\",name:\"password\",value:password,onChange:onChangePassword,validations:[required]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-block\",disabled:loading,children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Iniciar sesi\\xF3n\"})]})}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:message})}),/*#__PURE__*/_jsx(CheckButton,{style:{display:\"none\"},ref:checkBtn})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useRef","useNavigate","Form","Input","CheckButton","AuthService","required","value","Login","navigate","form","checkBtn","email","setEmail","password","setPassword","loading","setLoading","message","setMessage","onChangeEmail","e","target","onChangePassword","handleLogin","preventDefault","current","validateAll","context","_errors","length","login","then","window","location","reload","error","resMessage","response","data","toString","display"],"sources":["C:/Users/jaime/TFGProto/newfront/src/components/Login.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\n\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nconst required = (value) => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        Es necesario rellenar este campo.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst Login = () => {\r\n  let navigate = useNavigate();\r\n\r\n  const form = useRef();\r\n  const checkBtn = useRef();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const onChangeEmail = (e) => {\r\n    const email = e.target.value;\r\n    setEmail(email);\r\n  };\r\n\r\n  const onChangePassword = (e) => {\r\n    const password = e.target.value;\r\n    setPassword(password);\r\n  };\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n\r\n    setMessage(\"\");\r\n    setLoading(true);\r\n\r\n    form.current.validateAll();\r\n\r\n    if (checkBtn.current.context._errors.length === 0) {\r\n      AuthService.login(email, password).then(\r\n        () => {\r\n          //navigate(\"/profile\") si directamente quieres ir al perfil\r\n          navigate(\"/resolver\");\r\n          window.location.reload();\r\n        },\r\n        (error) => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          setLoading(false);\r\n          setMessage(resMessage);\r\n        }\r\n      );\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-md-12\">\r\n      <div className=\"card card-container\">\r\n        <img\r\n          src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n          alt=\"profile-img\"\r\n          className=\"profile-img-card\"\r\n        />\r\n\r\n        <Form onSubmit={handleLogin} ref={form}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"email\">Email</label>\r\n            <Input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={onChangeEmail}\r\n              validations={[required]}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">Contraseña</label>\r\n            <Input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={onChangePassword}\r\n              validations={[required]}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <button className=\"btn btn-primary btn-block\" disabled={loading}>\r\n              {loading && (\r\n                <span className=\"spinner-border spinner-border-sm\"></span>\r\n              )}\r\n              <span>Iniciar sesión</span>\r\n            </button>\r\n          </div>\r\n\r\n          {message && (\r\n            <div className=\"form-group\">\r\n              <div className=\"alert alert-danger\" role=\"alert\">\r\n                {message}\r\n              </div>\r\n            </div>\r\n          )}\r\n          <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}