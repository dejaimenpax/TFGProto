{"ast":null,"code":"import _objectSpread from\"C:/Users/jaime/TFGProto/newfront/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/jaime/TFGProto/newfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import ExerciseService from\"../../services/exercise.service\";import ExerciseBlock from\"./ExerciseBlock\";import\"../../styles/Exercises/ConfigureExercises.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConfigureExercises=function ConfigureExercises(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),exercises=_useState2[0],setExercises=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showSuccessMessage=_useState4[0],setShowSuccessMessage=_useState4[1];useEffect(function(){ExerciseService.getAllExercises().then(function(response){setExercises(response.data);}).catch(function(error){return console.error(\"Error loading exercises:\",error);});},[]);var handleExerciseVisibilityChange=function handleExerciseVisibilityChange(exerciseId,newVisibility){var updatedExercises=exercises.map(function(exercise){return exercise._id===exerciseId?_objectSpread(_objectSpread({},exercise),{},{flag_active:newVisibility}):exercise;});setExercises(updatedExercises);};var handleSaveChanges=function handleSaveChanges(){ExerciseService.updateExercisesVisibility(exercises).then(function(response){setExercises(response.data);setShowSuccessMessage(true);// Hide success message after 3 seconds\nsetTimeout(function(){setShowSuccessMessage(false);},3000);}).catch(function(error){return console.error(\"Error updating exercise visibility:\",error);});};// Group exercises by their block (id_tema)\nvar groupedExercises=exercises.reduce(function(grouped,exercise){var block=exercise.id_tema.toString()[0];if(!grouped[block]){grouped[block]=[];}grouped[block].push(exercise);return grouped;},{});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"Configurar visibilidad de ejercicios\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row row-cols-md-2 row-cols-1\",children:Object.entries(groupedExercises).map(function(_ref){var _ref2=_slicedToArray(_ref,2),block=_ref2[0],blockExercises=_ref2[1];return/*#__PURE__*/_jsx(ExerciseBlock,{blockNumber:block,exercises:blockExercises,onExerciseVisibilityChange:handleExerciseVisibilityChange},block);})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveChanges,className:\"btn btn-custom btn-block\",children:\"Guardar cambios\"}),showSuccessMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success text-center mt-3\",role:\"alert\",children:\"Se ha guardado la configuraci\\xF3n de visibilidad de los ejercicios.\"}),/*#__PURE__*/_jsx(\"p\",{children:\" \"})]});};export default ConfigureExercises;","map":{"version":3,"names":["React","useState","useEffect","ExerciseService","ExerciseBlock","ConfigureExercises","exercises","setExercises","showSuccessMessage","setShowSuccessMessage","getAllExercises","then","response","data","catch","error","console","handleExerciseVisibilityChange","exerciseId","newVisibility","updatedExercises","map","exercise","_id","flag_active","handleSaveChanges","updateExercisesVisibility","setTimeout","groupedExercises","reduce","grouped","block","id_tema","toString","push","Object","entries","blockExercises"],"sources":["C:/Users/jaime/TFGProto/newfront/src/components/Exercises/ConfigureExercises.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ExerciseService from \"../../services/exercise.service\";\r\nimport ExerciseBlock from \"./ExerciseBlock\";\r\nimport \"../../styles/Exercises/ConfigureExercises.css\";\r\n\r\nconst ConfigureExercises = () => {\r\n  const [exercises, setExercises] = useState([]);\r\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\r\n\r\n  useEffect(() => {\r\n    ExerciseService.getAllExercises()\r\n      .then((response) => {\r\n        setExercises(response.data);\r\n      })\r\n      .catch((error) => console.error(\"Error loading exercises:\", error));\r\n  }, []);\r\n\r\n  const handleExerciseVisibilityChange = (exerciseId, newVisibility) => {\r\n    const updatedExercises = exercises.map((exercise) =>\r\n      exercise._id === exerciseId ? { ...exercise, flag_active: newVisibility } : exercise\r\n    );\r\n    setExercises(updatedExercises);\r\n  };\r\n\r\n  const handleSaveChanges = () => {\r\n    ExerciseService.updateExercisesVisibility(exercises)\r\n      .then((response) => {\r\n        setExercises(response.data);\r\n        setShowSuccessMessage(true);\r\n\r\n        // Hide success message after 3 seconds\r\n        setTimeout(() => {\r\n          setShowSuccessMessage(false);\r\n        }, 3000);\r\n      })\r\n      .catch((error) => console.error(\"Error updating exercise visibility:\", error));\r\n  };\r\n\r\n  // Group exercises by their block (id_tema)\r\n  const groupedExercises = exercises.reduce((grouped, exercise) => {\r\n    const block = exercise.id_tema.toString()[0];\r\n    if (!grouped[block]) {\r\n      grouped[block] = [];\r\n    }\r\n    grouped[block].push(exercise);\r\n    return grouped;\r\n  }, {});\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h3 className=\"text-center\">Configurar visibilidad de ejercicios</h3>\r\n      <div className=\"row row-cols-md-2 row-cols-1\">\r\n        {Object.entries(groupedExercises).map(([block, blockExercises]) => (\r\n          <ExerciseBlock\r\n            key={block}\r\n            blockNumber={block}\r\n            exercises={blockExercises}\r\n            onExerciseVisibilityChange={handleExerciseVisibilityChange}\r\n          />\r\n        ))}\r\n      </div>\r\n      <button onClick={handleSaveChanges} className=\"btn btn-custom btn-block\">\r\n        Guardar cambios\r\n      </button>\r\n      {showSuccessMessage && (\r\n        <div className=\"alert alert-success text-center mt-3\" role=\"alert\">\r\n          Se ha guardado la configuraci√≥n de visibilidad de los ejercicios.\r\n        </div>\r\n      )}\r\n      <p> </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfigureExercises;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}