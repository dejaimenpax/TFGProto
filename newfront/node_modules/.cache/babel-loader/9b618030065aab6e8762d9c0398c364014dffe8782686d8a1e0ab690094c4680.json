{"ast":null,"code":"import _slicedToArray from\"C:/Users/jaime/TFGProto/newfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import UserService from\"../../services/user.service\";import EventBus from\"../../common/EventBus\";import Username from\"./Username\";import Roles from\"./Roles\";import\"../../styles/Profile/Profile.css\";import AuthService from\"../../services/auth.service\";import{encrypt}from\"../../common/Encryption\";import{encryptionKey}from\"../../common/Config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var logOut=_ref.logOut;var _useState=useState(),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var currentUser=AuthService.getCurrentUser();useEffect(function(){UserService.getUserBoard().then(function(response){setContent(\"Logged\");},function(error){var _content=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setContent(_content);if(error.response&&error.response.status===401){EventBus.dispatch(\"logout\");}});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"profile-section text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Datos del perfil\"}),/*#__PURE__*/_jsx(\"div\",{className:\"jumbotron\",children:content===\"Logged\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Username,{username:currentUser.username}),/*#__PURE__*/_jsx(Roles,{roles:currentUser.roles}),currentUser.roles.includes(\"ROLE_TEACHER\")&&/*#__PURE__*/_jsx(\"div\",{className:\"profile-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-label text-center\",children:[\"C\\xF3digo \\xFAnico de profesor:      \",encrypt(currentUser.username,encryptionKey)]})})]}):/*#__PURE__*/_jsx(_Fragment,{children:content})})]})});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","UserService","EventBus","Username","Roles","AuthService","encrypt","encryptionKey","Profile","logOut","content","setContent","currentUser","getCurrentUser","getUserBoard","then","response","error","_content","data","message","toString","status","dispatch","username","roles","includes"],"sources":["C:/Users/jaime/TFGProto/newfront/src/components/Profile/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport UserService from \"../../services/user.service\";\r\nimport EventBus from \"../../common/EventBus\";\r\nimport Username from \"./Username\";\r\nimport Roles from \"./Roles\";\r\nimport \"../../styles/Profile/Profile.css\";\r\nimport AuthService from \"../../services/auth.service\";\r\n\r\nimport { encrypt } from \"../../common/Encryption\";\r\nimport { encryptionKey } from \"../../common/Config\";\r\n\r\nconst Profile = ({ logOut }) => {\r\n  const [content, setContent] = useState();\r\n  const currentUser = AuthService.getCurrentUser();\r\n\r\n  useEffect(() => {\r\n    UserService.getUserBoard().then(\r\n      (response) => {\r\n        setContent(\"Logged\");\r\n      },\r\n      (error) => {\r\n        const _content =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString();\r\n\r\n        setContent(_content);\r\n\r\n        if (error.response && error.response.status === 401) {\r\n          EventBus.dispatch(\"logout\");\r\n        }\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <section className=\"profile-section text-center\">\r\n        <h2>Datos del perfil</h2>\r\n        <div className=\"jumbotron\">\r\n          {content === \"Logged\" ? (\r\n            <>\r\n              <Username username={currentUser.username} />\r\n              <Roles roles={currentUser.roles} />\r\n              {currentUser.roles.includes(\"ROLE_TEACHER\") &&\r\n                <div className=\"profile-row\">\r\n                  <div className=\"profile-label text-center\">Código único de profesor:      {encrypt(currentUser.username, encryptionKey)}</div>\r\n                </div>\r\n              }\r\n            </>\r\n          ) : (\r\n            <>{content}</>\r\n          )}\r\n        </div>\r\n      </section>\r\n      \r\n      {/* Borrado en la feature/eliminarAutoborrado\r\n\r\n      <section className=\"config-section text-center\">\r\n        <h2>Configuración</h2>\r\n        {content === \"Logged\" ? (\r\n          <>\r\n            <button\r\n              className=\"btn btn-custom btn-block\"\r\n              onClick={handleEraseStats}\r\n            >\r\n              Borrar Estadísticas\r\n            </button>\r\n            {showMessage && (\r\n              <div className=\"input-feedback alert alert-success text-center\">\r\n                ¡Las estadísticas han sido borradas!\r\n              </div>\r\n            )}\r\n            <button\r\n              className=\"btn btn-danger btn-block\"\r\n              onClick={handleDeleteAccountById}\r\n            >\r\n              Borrar Cuenta\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <>{content}</>\r\n        )}\r\n      </section>\r\n\r\n\r\n      \r\n      */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"sHAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,YAAW,KAAM,6BAA6B,CACrD,MAAOC,SAAQ,KAAM,uBAAuB,CAC5C,MAAOC,SAAQ,KAAM,YAAY,CACjC,MAAOC,MAAK,KAAM,SAAS,CAC3B,MAAO,kCAAkC,CACzC,MAAOC,YAAW,KAAM,6BAA6B,CAErD,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,aAAa,KAAQ,qBAAqB,CAAC,6IAEpD,GAAMC,QAAO,CAAG,QAAVA,QAAO,MAAmB,IAAbC,OAAM,MAANA,MAAM,CACvB,cAA8BV,QAAQ,EAAE,wCAAjCW,OAAO,eAAEC,UAAU,eAC1B,GAAMC,YAAW,CAAGP,WAAW,CAACQ,cAAc,EAAE,CAEhDb,SAAS,CAAC,UAAM,CACdC,WAAW,CAACa,YAAY,EAAE,CAACC,IAAI,CAC7B,SAACC,QAAQ,CAAK,CACZL,UAAU,CAAC,QAAQ,CAAC,CACtB,CAAC,CACD,SAACM,KAAK,CAAK,CACT,GAAMC,SAAQ,CACXD,KAAK,CAACD,QAAQ,EACbC,KAAK,CAACD,QAAQ,CAACG,IAAI,EACnBF,KAAK,CAACD,QAAQ,CAACG,IAAI,CAACC,OAAO,EAC7BH,KAAK,CAACG,OAAO,EACbH,KAAK,CAACI,QAAQ,EAAE,CAElBV,UAAU,CAACO,QAAQ,CAAC,CAEpB,GAAID,KAAK,CAACD,QAAQ,EAAIC,KAAK,CAACD,QAAQ,CAACM,MAAM,GAAK,GAAG,CAAE,CACnDpB,QAAQ,CAACqB,QAAQ,CAAC,QAAQ,CAAC,CAC7B,CACF,CAAC,CACF,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,YAAK,SAAS,CAAC,WAAW,uBACxB,iBAAS,SAAS,CAAC,6BAA6B,wBAC9C,oBAAI,kBAAgB,EAAK,cACzB,YAAK,SAAS,CAAC,WAAW,UACvBb,OAAO,GAAK,QAAQ,cACnB,wCACE,KAAC,QAAQ,EAAC,QAAQ,CAAEE,WAAW,CAACY,QAAS,EAAG,cAC5C,KAAC,KAAK,EAAC,KAAK,CAAEZ,WAAW,CAACa,KAAM,EAAG,CAClCb,WAAW,CAACa,KAAK,CAACC,QAAQ,CAAC,cAAc,CAAC,eACzC,YAAK,SAAS,CAAC,aAAa,uBAC1B,aAAK,SAAS,CAAC,2BAA2B,WAAC,uCAA+B,CAACpB,OAAO,CAACM,WAAW,CAACY,QAAQ,CAAEjB,aAAa,CAAC,GAAO,EAC1H,GAEP,cAEH,yBAAGG,OAAO,EACX,EACG,GACE,EAkCN,CAEV,CAAC,CAED,cAAeF,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}