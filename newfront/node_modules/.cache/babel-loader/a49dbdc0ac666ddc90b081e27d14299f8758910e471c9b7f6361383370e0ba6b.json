{"ast":null,"code":"import axios from\"axios\";var API_URL=\"http://tfgjaimeback.fly.dev/api/auth/\";var register=function register(email,password,teacher,role){return axios.post(API_URL+\"signup\",{email:email,password:password,teacher:teacher,role:role});};var login=function login(email,password){return axios.post(API_URL+\"signin\",{email:email,password:password}).then(function(response){if(response.data.accessToken){localStorage.setItem(\"user\",JSON.stringify(response.data));}return response.data;});};var logout=function logout(){localStorage.removeItem(\"user\");};var getCurrentUser=function getCurrentUser(){return JSON.parse(localStorage.getItem(\"user\"));};var getCurrentUserFromDB=function getCurrentUserFromDB(){var user=getCurrentUser();if(user&&user.accessToken){console.log(\"Entra al getCurrentuserFromDB\");return axios.get(API_URL+\"user\",{headers:{\"x-access-token\":user.accessToken}});}else{return Promise.reject(new Error(\"User not found or token expired\"));}};var getTeachers=function getTeachers(){return axios.get(API_URL+\"teachers\");};var getMyStudents=function getMyStudents(){var user=getCurrentUser();if(user&&user.accessToken){return axios.get(API_URL+\"students\",{headers:{\"x-access-token\":user.accessToken}});}else{return Promise.reject(new Error(\"User not found or token expired\"));}};var AuthService={register:register,login:login,logout:logout,getCurrentUser:getCurrentUser,getCurrentUserFromDB:getCurrentUserFromDB,getTeachers:getTeachers,getMyStudents:getMyStudents};export default AuthService;","map":{"version":3,"names":["axios","API_URL","register","email","password","teacher","role","post","login","then","response","data","accessToken","localStorage","setItem","JSON","stringify","logout","removeItem","getCurrentUser","parse","getItem","getCurrentUserFromDB","user","console","log","get","headers","Promise","reject","Error","getTeachers","getMyStudents","AuthService"],"sources":["C:/Users/jaime/TFGProto/newfront/src/services/auth.service.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API_URL = \"http://tfgjaimeback.fly.dev/api/auth/\";\r\n\r\nconst register = (email, password, teacher, role) => {\r\n  return axios.post(API_URL + \"signup\", {\r\n    email,\r\n    password,\r\n    teacher,\r\n    role,\r\n  });\r\n};\r\n\r\nconst login = (email, password) => {\r\n  return axios\r\n    .post(API_URL + \"signin\", {\r\n      email,\r\n      password,\r\n    })\r\n    .then((response) => {\r\n      if (response.data.accessToken) {\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n      }\r\n\r\n      return response.data;\r\n    });\r\n};\r\n\r\nconst logout = () => {\r\n  localStorage.removeItem(\"user\");\r\n};\r\n\r\nconst getCurrentUser = () => {\r\n  return JSON.parse(localStorage.getItem(\"user\"));\r\n};\r\n\r\nconst getCurrentUserFromDB = () => {\r\n  const user = getCurrentUser();\r\n  if (user && user.accessToken) {\r\n    console.log(\"Entra al getCurrentuserFromDB\")\r\n    return axios.get(API_URL + \"user\", {\r\n      headers: { \"x-access-token\": user.accessToken },\r\n    });\r\n  } else {\r\n    return Promise.reject(new Error(\"User not found or token expired\"));\r\n  }\r\n};\r\n\r\nconst getTeachers = () => {\r\n  return axios.get(API_URL + \"teachers\");\r\n}\r\n\r\nconst getMyStudents = () => {\r\n  const user = getCurrentUser();\r\n  if (user && user.accessToken) {\r\n    return axios.get(API_URL + \"students\", {\r\n      headers: { \"x-access-token\": user.accessToken },\r\n    });\r\n  } else {\r\n    return Promise.reject(new Error(\"User not found or token expired\"));\r\n  }\r\n}\r\n\r\nconst AuthService = {\r\n  register,\r\n  login,\r\n  logout,\r\n  getCurrentUser,\r\n  getCurrentUserFromDB,\r\n  getTeachers,\r\n  getMyStudents,\r\n};\r\n\r\nexport default AuthService;\r\n"],"mappings":"AAAA,MAAOA,MAAK,KAAM,OAAO,CAEzB,GAAMC,QAAO,CAAG,uCAAuC,CAEvD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAK,CAAEC,QAAQ,CAAEC,OAAO,CAAEC,IAAI,CAAK,CACnD,MAAON,MAAK,CAACO,IAAI,CAACN,OAAO,CAAG,QAAQ,CAAE,CACpCE,KAAK,CAALA,KAAK,CACLC,QAAQ,CAARA,QAAQ,CACRC,OAAO,CAAPA,OAAO,CACPC,IAAI,CAAJA,IACF,CAAC,CAAC,CACJ,CAAC,CAED,GAAME,MAAK,CAAG,QAARA,MAAK,CAAIL,KAAK,CAAEC,QAAQ,CAAK,CACjC,MAAOJ,MAAK,CACTO,IAAI,CAACN,OAAO,CAAG,QAAQ,CAAE,CACxBE,KAAK,CAALA,KAAK,CACLC,QAAQ,CAARA,QACF,CAAC,CAAC,CACDK,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB,GAAIA,QAAQ,CAACC,IAAI,CAACC,WAAW,CAAE,CAC7BC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACN,QAAQ,CAACC,IAAI,CAAC,CAAC,CAC7D,CAEA,MAAOD,SAAQ,CAACC,IAAI,CACtB,CAAC,CAAC,CACN,CAAC,CAED,GAAMM,OAAM,CAAG,QAATA,OAAM,EAAS,CACnBJ,YAAY,CAACK,UAAU,CAAC,MAAM,CAAC,CACjC,CAAC,CAED,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3B,MAAOJ,KAAI,CAACK,KAAK,CAACP,YAAY,CAACQ,OAAO,CAAC,MAAM,CAAC,CAAC,CACjD,CAAC,CAED,GAAMC,qBAAoB,CAAG,QAAvBA,qBAAoB,EAAS,CACjC,GAAMC,KAAI,CAAGJ,cAAc,EAAE,CAC7B,GAAII,IAAI,EAAIA,IAAI,CAACX,WAAW,CAAE,CAC5BY,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5C,MAAOzB,MAAK,CAAC0B,GAAG,CAACzB,OAAO,CAAG,MAAM,CAAE,CACjC0B,OAAO,CAAE,CAAE,gBAAgB,CAAEJ,IAAI,CAACX,WAAY,CAChD,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,MAAOgB,QAAO,CAACC,MAAM,CAAC,GAAIC,MAAK,CAAC,iCAAiC,CAAC,CAAC,CACrE,CACF,CAAC,CAED,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACxB,MAAO/B,MAAK,CAAC0B,GAAG,CAACzB,OAAO,CAAG,UAAU,CAAC,CACxC,CAAC,CAED,GAAM+B,cAAa,CAAG,QAAhBA,cAAa,EAAS,CAC1B,GAAMT,KAAI,CAAGJ,cAAc,EAAE,CAC7B,GAAII,IAAI,EAAIA,IAAI,CAACX,WAAW,CAAE,CAC5B,MAAOZ,MAAK,CAAC0B,GAAG,CAACzB,OAAO,CAAG,UAAU,CAAE,CACrC0B,OAAO,CAAE,CAAE,gBAAgB,CAAEJ,IAAI,CAACX,WAAY,CAChD,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,MAAOgB,QAAO,CAACC,MAAM,CAAC,GAAIC,MAAK,CAAC,iCAAiC,CAAC,CAAC,CACrE,CACF,CAAC,CAED,GAAMG,YAAW,CAAG,CAClB/B,QAAQ,CAARA,QAAQ,CACRM,KAAK,CAALA,KAAK,CACLS,MAAM,CAANA,MAAM,CACNE,cAAc,CAAdA,cAAc,CACdG,oBAAoB,CAApBA,oBAAoB,CACpBS,WAAW,CAAXA,WAAW,CACXC,aAAa,CAAbA,aACF,CAAC,CAED,cAAeC,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}