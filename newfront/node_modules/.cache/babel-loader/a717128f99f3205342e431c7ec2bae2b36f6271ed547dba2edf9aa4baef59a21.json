{"ast":null,"code":"import _objectSpread from\"C:/Users/jaime/TFGProto/newfront/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/jaime/TFGProto/newfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import ExerciseService from\"../../services/exercise.service\";import\"../../styles/Exercises/ConfigureExercises.css\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConfigureExercises=function ConfigureExercises(_ref){var user=_ref.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),exercises=_useState2[0],setExercises=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showSuccessMessage=_useState4[0],setShowSuccessMessage=_useState4[1];useEffect(function(){ExerciseService.getAllExercises().then(function(response){setExercises(response.data.sort(function(a,b){return a.name.localeCompare(b.name);}));}).catch(function(error){return console.error(\"Error loading exercises:\",error);});},[]);var handleExerciseVisibilityChange=function handleExerciseVisibilityChange(exerciseId,newVisibility){var updatedExercises=exercises.map(function(exercise){if(exercise._id===exerciseId){return _objectSpread(_objectSpread({},exercise),{},{flag_active:newVisibility});}return exercise;});setExercises(updatedExercises);};var handleSaveChanges=function handleSaveChanges(){ExerciseService.updateExercisesVisibility(exercises).then(function(response){setExercises(response.data);setShowSuccessMessage(true);// Hide success message after 3 seconds\nsetTimeout(function(){setShowSuccessMessage(false);},3000);}).catch(function(error){return console.error(\"Error actualizando la visibilidad de ejercicios:\",error);});};// Group exercises by their block (id_tema)\nvar groupedExercises=exercises.reduce(function(grouped,exercise){var block=exercise.id_tema.toString()[0];if(!grouped[block]){grouped[block]=[];}grouped[block].push(exercise);return grouped;},{});var getBlockName=function getBlockName(block){switch(block.toString()){case\"1\":return\"Números y Operaciones\";case\"2\":return\"Unidades de Medida\";case\"3\":return\"Formas Geométricas\";case\"4\":return\"Gráficas y Estadística\";default:return\"\";}};return/*#__PURE__*/_jsxs(_Fragment,{children:[(user===null||user===void 0?void 0:user.username)!==(user===null||user===void 0?void 0:user.teacher)&&/*#__PURE__*/ //si no es profesor\n_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"Configurar visibilidad de ejercicios\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row row-cols-md-2 row-cols-1\",children:Object.entries(groupedExercises).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),block=_ref3[0],blockExercises=_ref3[1];return/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title text-center\",children:[\"Bloque \",block,\": \",getBlockName(block)]}),blockExercises.map(function(exercise){return/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:exercise.flag_active,onChange:function onChange(e){return handleExerciseVisibilityChange(exercise._id,e.target.checked);}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"exercise-\".concat(exercise._id),children:exercise.name})]},exercise._id);}),block.toString()===\"4\"&&/*#__PURE__*/_jsx(\"div\",{className:\"form-check\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",children:\"\\xA0\"})})]})})},block);})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveChanges,className:\"btn btn-custom btn-block\",children:\"Guardar cambios\"}),showSuccessMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success text-center\",role:\"alert\",children:\"Se ha guardado la configuraci\\xF3n de visibilidad de los ejercicios\"}),/*#__PURE__*/_jsx(\"p\",{children:\" \"})]}),(user===null||user===void 0?void 0:user.username)===(user===null||user===void 0?void 0:user.teacher)&&/*#__PURE__*/ //si es profesor\n_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"Ejercicios actualmente visibles\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row row-cols-md-2 row-cols-1\",children:Object.entries(groupedExercises).map(function(_ref4){var _ref5=_slicedToArray(_ref4,2),block=_ref5[0],blockExercises=_ref5[1];return/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title text-center\",children:[\"Bloque \",block]}),blockExercises.map(function(exercise){return/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:exercise.flag_active,disabled:true}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"exercise-\".concat(exercise._id),children:exercise.name})]},exercise._id);})]})})},block);})}),/*#__PURE__*/_jsx(\"p\",{children:\" \"})]})]});};export default ConfigureExercises;","map":{"version":3,"names":["React","useState","useEffect","ExerciseService","ConfigureExercises","user","exercises","setExercises","showSuccessMessage","setShowSuccessMessage","getAllExercises","then","response","data","sort","a","b","name","localeCompare","catch","error","console","handleExerciseVisibilityChange","exerciseId","newVisibility","updatedExercises","map","exercise","_id","flag_active","handleSaveChanges","updateExercisesVisibility","setTimeout","groupedExercises","reduce","grouped","block","id_tema","toString","push","getBlockName","username","teacher","Object","entries","blockExercises","e","target","checked"],"sources":["C:/Users/jaime/TFGProto/newfront/src/components/Exercises/ConfigureExercises.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ExerciseService from \"../../services/exercise.service\";\r\nimport \"../../styles/Exercises/ConfigureExercises.css\";\r\n\r\nconst ConfigureExercises = ( {user} ) => {\r\n  const [exercises, setExercises] = useState([]);\r\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\r\n\r\n  useEffect(() => {\r\n    ExerciseService.getAllExercises()\r\n      .then((response) => {\r\n        setExercises(response.data.sort((a, b) => a.name.localeCompare(b.name)));\r\n      })\r\n      .catch((error) => console.error(\"Error loading exercises:\", error));\r\n  }, []);\r\n\r\n  const handleExerciseVisibilityChange = (exerciseId, newVisibility) => {\r\n    const updatedExercises = exercises.map((exercise) => {\r\n      if (exercise._id === exerciseId) {\r\n        return { ...exercise, flag_active: newVisibility };\r\n      }\r\n      return exercise;\r\n    });\r\n    setExercises(updatedExercises);\r\n  };\r\n\r\n  const handleSaveChanges = () => {\r\n    ExerciseService.updateExercisesVisibility(exercises)\r\n      .then((response) => {\r\n        setExercises(response.data);\r\n        setShowSuccessMessage(true);\r\n\r\n        // Hide success message after 3 seconds\r\n        setTimeout(() => {\r\n          setShowSuccessMessage(false);\r\n        }, 3000);\r\n      })\r\n      .catch((error) => console.error(\"Error actualizando la visibilidad de ejercicios:\", error));\r\n  };\r\n\r\n  // Group exercises by their block (id_tema)\r\n  const groupedExercises = exercises.reduce((grouped, exercise) => {\r\n    const block = exercise.id_tema.toString()[0];\r\n    if (!grouped[block]) {\r\n      grouped[block] = [];\r\n    }\r\n    grouped[block].push(exercise);\r\n    return grouped;\r\n  }, {});\r\n\r\n  const getBlockName = (block) => {\r\n    switch (block.toString()) {\r\n      case \"1\":\r\n        return \"Números y Operaciones\";\r\n      case \"2\":\r\n        return \"Unidades de Medida\";\r\n      case \"3\":\r\n        return \"Formas Geométricas\";\r\n      case \"4\":\r\n        return \"Gráficas y Estadística\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {user?.username!==user?.teacher && //si no es profesor\r\n      (<div className=\"container\">\r\n\r\n        <h3 className=\"text-center\">Configurar visibilidad de ejercicios</h3>\r\n        <div className=\"row row-cols-md-2 row-cols-1\">\r\n          {Object.entries(groupedExercises).map(([block, blockExercises]) => (\r\n            <div key={block} className=\"col\">\r\n              <div className=\"card\">\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title text-center\">Bloque {block}: {getBlockName(block)}</h5>\r\n                  {blockExercises.map((exercise) => (\r\n                    <div key={exercise._id} className=\"form-check\">\r\n                      <input\r\n                        className=\"form-check-input\"\r\n                        type=\"checkbox\"\r\n                        checked={exercise.flag_active}\r\n                        onChange={(e) =>\r\n                          handleExerciseVisibilityChange(exercise._id, e.target.checked)\r\n                        }\r\n                      />\r\n                      <label\r\n                        className=\"form-check-label\"\r\n                        htmlFor={`exercise-${exercise._id}`}\r\n                      >\r\n                        {exercise.name}\r\n                      </label>\r\n                    </div>\r\n                  ))}\r\n                  {block.toString() === \"4\" && (\r\n                    <div className=\"form-check\">\r\n                      {/* Añadir una línea en blanco después de los ejercicios del bloque 4 */}\r\n                      <label className=\"form-check-label\">&nbsp;</label>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <button onClick={handleSaveChanges} className=\"btn btn-custom btn-block\">\r\n          Guardar cambios\r\n        </button>\r\n        {showSuccessMessage && (\r\n          <div className=\"alert alert-success text-center\" role=\"alert\">\r\n            Se ha guardado la configuración de visibilidad de los ejercicios\r\n          </div>\r\n        )}\r\n        <p> </p>\r\n\r\n      </div>)}\r\n\r\n      {user?.username===user?.teacher && //si es profesor\r\n      (<div className=\"container\">\r\n\r\n        <h3 className=\"text-center\">Ejercicios actualmente visibles</h3>\r\n        <div className=\"row row-cols-md-2 row-cols-1\">\r\n          {Object.entries(groupedExercises).map(([block, blockExercises]) => (\r\n            <div key={block} className=\"col\">\r\n              <div className=\"card\">\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title text-center\">Bloque {block}</h5>\r\n                  {blockExercises.map((exercise) => (\r\n                    <div key={exercise._id} className=\"form-check\">\r\n                      <input\r\n                        className=\"form-check-input\"\r\n                        type=\"checkbox\"\r\n                        checked={exercise.flag_active}\r\n                        disabled={true}\r\n                      />\r\n                      <label\r\n                        className=\"form-check-label\"\r\n                        htmlFor={`exercise-${exercise._id}`}\r\n                      >\r\n                        {exercise.name}\r\n                      </label>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <p> </p>\r\n\r\n      </div>)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ConfigureExercises;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}