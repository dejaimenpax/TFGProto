{"ast":null,"code":"import _slicedToArray from\"C:/Users/jaime/TFGProto/newfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Routes,Route,Link}from\"react-router-dom\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"./styles/App.css\";import helmet from'helmet';import AuthService from\"./services/auth.service\";import Login from\"./components/Login\";import Register from\"./components/Register\";import Home from\"./components/Home\";import Profile from\"./components/Profile/Profile\";import BoardUser from\"./components/BoardUser\";import BoardTeacher from\"./components/BoardTeacher\";import Resolver from\"./components/Exercises/Resolver\";import EventBus from\"./common/EventBus\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";helmet();var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showTeacherBoard=_useState2[0],setShowTeacherBoard=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];useEffect(function(){var user=AuthService.getCurrentUser();if(user){setCurrentUser(user);setShowTeacherBoard(user.roles.includes(\"ROLE_TEACHER\"));}EventBus.on(\"logout\",function(){logOut();});return function(){EventBus.remove(\"logout\");};},[]);var logOut=function logOut(){AuthService.logout();setShowTeacherBoard(false);setCurrentUser(undefined);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-expand-lg navbar-light bg-info\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-brand\",children:\"MatemAPIcas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav mr-auto\",children:[showTeacherBoard&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/teacher\",className:\"nav-link\",children:\"Panel de profesor\"})}),!showTeacherBoard&&currentUser&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/user\",className:\"nav-link\",children:\"Panel de alumno\"})})]}),currentUser?/*#__PURE__*/_jsx(\"div\",{className:\"navbar-nav ml-auto\",children:/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-info text-dark dropdown-toggle\",type:\"button\",id:\"dropdownMenuButton\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:[\"\\xC1rea de \",currentUser.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"dropdown-item\",children:\"Mi perfil\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"dropdown-item\",onClick:logOut,children:\"Cerrar Sesi\\xF3n\"})]})]})})}):/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav ml-auto\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"nav-link\",children:\"Iniciar Sesi\\xF3n\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"nav-link\",children:\"Registrarse\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{})}),/*#__PURE__*/_jsx(Route,{path:\"/user\",element:/*#__PURE__*/_jsx(BoardUser,{})}),/*#__PURE__*/_jsx(Route,{path:\"/teacher\",element:/*#__PURE__*/_jsx(BoardTeacher,{})}),/*#__PURE__*/_jsx(Route,{path:\"/resolver\",element:/*#__PURE__*/_jsx(Resolver,{})})]})})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Link","helmet","AuthService","Login","Register","Home","Profile","BoardUser","BoardTeacher","Resolver","EventBus","App","showTeacherBoard","setShowTeacherBoard","undefined","currentUser","setCurrentUser","user","getCurrentUser","roles","includes","on","logOut","remove","logout","email"],"sources":["C:/Users/jaime/TFGProto/newfront/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Routes, Route, Link } from \"react-router-dom\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./styles/App.css\";\r\nimport helmet from 'helmet';\r\n\r\nimport AuthService from \"./services/auth.service\";\r\nimport Login from \"./components/Login\";\r\nimport Register from \"./components/Register\";\r\nimport Home from \"./components/Home\";\r\nimport Profile from \"./components/Profile/Profile\";\r\nimport BoardUser from \"./components/BoardUser\";\r\nimport BoardTeacher from \"./components/BoardTeacher\";\r\nimport Resolver from \"./components/Exercises/Resolver\";\r\nimport EventBus from \"./common/EventBus\";\r\n\r\nhelmet();\r\n\r\nconst App = () => {\r\n  const [showTeacherBoard, setShowTeacherBoard] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState(undefined);\r\n\r\n  useEffect(() => {\r\n    const user = AuthService.getCurrentUser();\r\n\r\n    if (user) {\r\n      setCurrentUser(user);\r\n      setShowTeacherBoard(user.roles.includes(\"ROLE_TEACHER\"));\r\n    }\r\n\r\n    EventBus.on(\"logout\", () => {\r\n      logOut();\r\n    });\r\n\r\n    return () => {\r\n      EventBus.remove(\"logout\");\r\n    };\r\n  }, []);\r\n\r\n  const logOut = () => {\r\n    AuthService.logout();\r\n    setShowTeacherBoard(false);\r\n    setCurrentUser(undefined);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-info\">\r\n        <Link to={\"/\"} className=\"navbar-brand\">\r\n          MatemAPIcas\r\n        </Link>\r\n        <div className=\"navbar-nav mr-auto\">\r\n          {showTeacherBoard && (\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/teacher\"} className=\"nav-link\">\r\n                Panel de profesor\r\n              </Link>\r\n            </li>\r\n          )}\r\n          {!showTeacherBoard && currentUser && (\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/user\"} className=\"nav-link\">\r\n                Panel de alumno\r\n              </Link>\r\n            </li>\r\n          )}\r\n        </div>\r\n        {currentUser ? (\r\n          <div className=\"navbar-nav ml-auto\">\r\n            <li className=\"nav-item\">\r\n              <div className=\"dropdown\">\r\n                <button\r\n                  className=\"btn btn-info text-dark dropdown-toggle\"\r\n                  type=\"button\"\r\n                  id=\"dropdownMenuButton\"\r\n                  data-toggle=\"dropdown\"\r\n                  aria-haspopup=\"true\"\r\n                  aria-expanded=\"false\"\r\n                >\r\n                  Área de {currentUser.email}\r\n                </button>\r\n                <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\r\n                  <Link to={\"/profile\"} className=\"dropdown-item\">\r\n                    Mi perfil\r\n                  </Link>\r\n                  <a href=\"/login\" className=\"dropdown-item\" onClick={logOut}>\r\n                    Cerrar Sesión\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          </div>\r\n        ) : (\r\n          <div className=\"navbar-nav ml-auto\">\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/login\"} className=\"nav-link\">\r\n                Iniciar Sesión\r\n              </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/register\"} className=\"nav-link\">\r\n                Registrarse\r\n              </Link>\r\n            </li>\r\n          </div>\r\n        )}\r\n      </nav>\r\n      <div className=\"container mt-3\">\r\n        <Routes>\r\n          <Route path=\"/\" element={<Home />} />\r\n          <Route path=\"/login\" element={<Login />} />\r\n          <Route path=\"/register\" element={<Register />} />\r\n          <Route path=\"/profile\" element={<Profile />} />\r\n          <Route path=\"/user\" element={<BoardUser />} />\r\n          <Route path=\"/teacher\" element={<BoardTeacher />} />\r\n          <Route path=\"/resolver\" element={<Resolver />} />\r\n        </Routes>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}