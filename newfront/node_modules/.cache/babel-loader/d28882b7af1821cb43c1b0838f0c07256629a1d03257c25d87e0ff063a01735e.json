{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jaime\\\\TFGProto\\\\newfront\\\\src\\\\components\\\\Exercises\\\\SelectTopic.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport UserService from \"../../services/user.service\";\nimport ExerciseService from \"../../services/exercise.service\";\nimport EventBus from \"../../common/EventBus\";\nimport ExerciseCard from \"./ExerciseCard\";\nimport InputBox from \"./InputBox\";\nimport DropdownMenu from \"./DropdownMenu\";\nimport AuthService from \"../../services/auth.service\";\nimport '../../styles/Exercises/SelectTopic.css';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SelectTopic = () => {\n  _s();\n  const [content, setContent] = useState(\"\");\n  const [exerciseInput, setExerciseInput] = useState([]);\n  const [exercise, setExercise] = useState(null);\n  const [exerciseSelected, setExerciseSelected] = useState(false);\n  const [exerciseResolved, setExerciseResolved] = useState(false);\n  const [inputFilled, setInputFilled] = useState(false);\n  const handleSelect = id_tema => {\n    console.log(\"Entró en handleSelect\");\n    ExerciseService.createExercise(id_tema).then(response => {\n      setExercise(response.data);\n      setExerciseSelected(true);\n      setExerciseInput(Array.from({\n        length: response.data.long_input\n      }, () => \"\"));\n      setExerciseResolved(false);\n      setInputFilled(false);\n    }).catch(error => console.error(\"Error creating exercise:\", error));\n  };\n  const handleInput = input => {\n    if (input.every(value => value !== \"\")) {\n      const currentUser = AuthService.getCurrentUser();\n      ExerciseService.resolveExercise(exercise, input, currentUser.email).then(response => {\n        setExercise(response.data);\n        setExerciseResolved(true);\n        setInputFilled(false);\n      }).catch(error => console.error(\"Error resolving exercise:\", error));\n    } else {\n      setInputFilled(true);\n    }\n  };\n  const handleInputChange = (value, index) => {\n    const newExerciseInput = [...exerciseInput];\n    newExerciseInput[index] = value;\n    setExerciseInput(newExerciseInput);\n  };\n  useEffect(() => {\n    UserService.getUserBoard().then(response => {\n      setContent(response.data);\n    }, error => {\n      const _content = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      setContent(_content);\n      if (error.response && error.response.status === 401) {\n        EventBus.dispatch(\"logout\");\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(DropdownMenu, {\n      handleSelect: handleSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), exerciseSelected && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ExerciseCard, {\n        exercise: exercise\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        children: [exerciseInput.map((value, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-container d-flex flex-column\",\n          children: [/*#__PURE__*/_jsxDEV(InputBox, {\n            index: index,\n            value: value,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), inputFilled && value === \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-error alert alert-danger mt-1 mb-1\",\n            children: \"Introduce un valor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 19\n          }, this), exerciseResolved && (exercise.explicacion[index].includes(\"!\") ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-feedback alert alert-success text-center\",\n            children: exercise.explicacion[index]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-feedback alert alert-danger text-center\",\n            children: exercise.explicacion[index]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 21\n          }, this))]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this)), exerciseResolved ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSelect(parseInt(exercise.id_tema.toString()[0])),\n          children: \"Generar nuevo ejercicio del bloque\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-custom\",\n          onClick: () => handleInput(exerciseInput),\n          children: \"Resolver ejercicio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n_s(SelectTopic, \"L40LNSciY/CALU46x1O+WqX9oNY=\");\n_c = SelectTopic;\nexport default SelectTopic;\nvar _c;\n$RefreshReg$(_c, \"SelectTopic\");","map":{"version":3,"names":["React","useState","useEffect","UserService","ExerciseService","EventBus","ExerciseCard","InputBox","DropdownMenu","AuthService","SelectTopic","content","setContent","exerciseInput","setExerciseInput","exercise","setExercise","exerciseSelected","setExerciseSelected","exerciseResolved","setExerciseResolved","inputFilled","setInputFilled","handleSelect","id_tema","console","log","createExercise","then","response","data","Array","from","length","long_input","catch","error","handleInput","input","every","value","currentUser","getCurrentUser","resolveExercise","email","handleInputChange","index","newExerciseInput","getUserBoard","_content","message","toString","status","dispatch","map","explicacion","includes","parseInt"],"sources":["C:/Users/jaime/TFGProto/newfront/src/components/Exercises/SelectTopic.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport UserService from \"../../services/user.service\";\r\nimport ExerciseService from \"../../services/exercise.service\";\r\nimport EventBus from \"../../common/EventBus\";\r\nimport ExerciseCard from \"./ExerciseCard\";\r\nimport InputBox from \"./InputBox\"\r\nimport DropdownMenu from \"./DropdownMenu\"\r\nimport AuthService from \"../../services/auth.service\";\r\n\r\nimport '../../styles/Exercises/SelectTopic.css';\r\n\r\nconst SelectTopic = () => {\r\n  const [content, setContent] = useState(\"\");\r\n  const [exerciseInput, setExerciseInput] = useState([]);\r\n  const [exercise, setExercise] = useState(null);\r\n  const [exerciseSelected, setExerciseSelected] = useState(false);\r\n  const [exerciseResolved, setExerciseResolved] = useState(false);\r\n  const [inputFilled, setInputFilled] = useState(false);\r\n\r\n  const handleSelect = (id_tema) => {\r\n    console.log(\"Entró en handleSelect\")\r\n    ExerciseService.createExercise(id_tema)\r\n      .then((response) => {\r\n        setExercise(response.data);\r\n        setExerciseSelected(true);\r\n        setExerciseInput(Array.from({ length: response.data.long_input }, () => \"\"));\r\n        setExerciseResolved(false);\r\n        setInputFilled(false);\r\n      })\r\n      .catch((error) => console.error(\"Error creating exercise:\", error));\r\n  };\r\n\r\n  const handleInput = (input) => {\r\n    if (input.every((value) => value !== \"\")) {\r\n      const currentUser = AuthService.getCurrentUser();\r\n      ExerciseService.resolveExercise(exercise, input, currentUser.email)\r\n        .then((response) => {\r\n          setExercise(response.data);\r\n          setExerciseResolved(true);\r\n          setInputFilled(false);\r\n        })\r\n        .catch((error) => console.error(\"Error resolving exercise:\", error));\r\n    } else {\r\n      setInputFilled(true);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (value, index) => {\r\n    const newExerciseInput = [...exerciseInput];\r\n    newExerciseInput[index] = value;\r\n    setExerciseInput(newExerciseInput);\r\n  };\r\n\r\n  useEffect(() => {\r\n    UserService.getUserBoard().then(\r\n      (response) => {\r\n        setContent(response.data);\r\n      },\r\n      (error) => {\r\n        const _content =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString();\r\n\r\n        setContent(_content);\r\n\r\n        if (error.response && error.response.status === 401) {\r\n          EventBus.dispatch(\"logout\");\r\n        }\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <DropdownMenu handleSelect={handleSelect} />\r\n  \r\n      {exerciseSelected && (\r\n        <>\r\n          <ExerciseCard exercise={exercise} />\r\n  \r\n          <div className=\"d-flex flex-column\">\r\n            {exerciseInput.map((value, index) => (\r\n              <div key={index} className=\"input-container d-flex flex-column\">\r\n                <InputBox index={index} value={value} onChange={handleInputChange} />\r\n  \r\n                {inputFilled && value === \"\" && (\r\n                  <div className=\"input-error alert alert-danger mt-1 mb-1\">\r\n                    Introduce un valor\r\n                  </div>\r\n                )}\r\n  \r\n                {exerciseResolved && (exercise.explicacion[index].includes(\"!\") \r\n                  ? <div className=\"input-feedback alert alert-success text-center\">\r\n                      {exercise.explicacion[index]}\r\n                    </div>\r\n                  : <div className=\"input-feedback alert alert-danger text-center\">\r\n                      {exercise.explicacion[index]}\r\n                    </div>\r\n                )}\r\n  \r\n              </div>\r\n            ))}\r\n            {exerciseResolved ? (\r\n              <button onClick={() => handleSelect(parseInt(exercise.id_tema.toString()[0]))}>\r\n                Generar nuevo ejercicio del bloque\r\n              </button>\r\n            ) : (\r\n              <button className=\"btn btn-custom\" onClick={() => handleInput(exerciseInput)}>\r\n                Resolver ejercicio\r\n              </button>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n  \r\n\r\n}\r\n\r\n\r\nexport default SelectTopic\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}